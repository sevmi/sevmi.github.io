{"version":3,"sources":["webpack:///./node_modules/parse/lib/browser/LiveQuerySubscription.js","webpack:///./node_modules/parse/lib/browser/FacebookUtils.js","webpack:///./node_modules/parse/lib/browser/ObjectStateMutations.js","webpack:///./node_modules/parse/lib/browser/Analytics.js","webpack:///./node_modules/parse/lib/browser/CoreManager.js","webpack:///./node_modules/parse/lib/browser/LocalDatastoreUtils.js","webpack:///./node_modules/parse/lib/browser/CryptoController.js","webpack:///./node_modules/parse/lib/browser/LiveQueryClient.js","webpack:///./node_modules/parse/lib/browser/Cloud.js","webpack:///./node_modules/parse/lib/browser/LocalDatastore.js","webpack:///./node_modules/parse/index.js","webpack:///./node_modules/parse/lib/browser/LocalDatastoreController.js","webpack:///./node_modules/parse/lib/browser/EventEmitter.js","webpack:///./node_modules/parse/lib/browser/InstallationController.js","webpack:///./node_modules/parse/lib/browser/AnonymousUtils.js"],"names":["_interopRequireDefault","_Object$defineProperty","exports","value","default","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","_EventEmitter2","_CoreManager","_promiseUtils","Subscription","_EventEmitter","id","query","sessionToken","_this","this","call","subscribePromise","resolvingPromise","subscribed","on","key","_this2","getLiveQueryController","getDefaultLiveQueryClient","then","liveQueryClient","unsubscribe","emit","_default","requestedPermissions","initOptions","_ParseUser","initialized","provider","authenticate","options","FB","error","login","response","authResponse","success","userID","access_token","accessToken","expiration_date","Date","expiresIn","getTime","toJSON","scope","restoreAuthentication","authData","newOptions","status","existingResponse","getAuthResponse","logout","init","getAuthType","deauthenticate","FacebookUtils","Error","console","warn","log","_registerAuthenticationProvider","isLinked","user","_isLinked","logIn","permissions","logInWith","link","linkWith","unlink","_unlinkFrom","_getAuthProvider","defaultState","setServerData","setPendingOp","pushPendingState","popPendingState","mergeFirstPendingState","estimateAttribute","estimateAttributes","commitServerChanges","_stringify","_typeof2","_assign","_includes","_encode","_ParseFile","_ParseObject","_ParseRelation","_TaskQueue","_ParseOp","serverData","pendingOps","objectCache","tasks","existed","attributes","_attr","attr","op","last","length","push","first","shift","next","_attr2","merged","mergeWith","className","i","RelationOp","applyTo","data","fields","split","object","_i","changes","_attr3","val","json","track","name","dimensions","replace","TypeError","_key","getAnalyticsController","DefaultController","RESTController","getRESTController","request","setAnalyticsController","_concat","_forEach","config","IS_NODE","process","versions","node","electron","REQUEST_ATTEMPT_LIMIT","REQUEST_HEADERS","SERVER_URL","SERVER_AUTH_TYPE","SERVER_AUTH_TOKEN","LIVEQUERY_SERVER_URL","ENCRYPTED_KEY","VERSION","APPLICATION_ID","JAVASCRIPT_KEY","MASTER_KEY","USE_MASTER_KEY","PERFORM_USER_REWRITE","FORCE_REVOCABLE_SESSION","ENCRYPTED_USER","requireMethods","methods","controller","func","_context","concat","module","get","hasOwnProperty","set","setCloudController","getCloudController","setConfigController","getConfigController","setCryptoController","getCryptoController","setFileController","getFileController","setInstallationController","getInstallationController","setObjectController","getObjectController","setObjectStateController","getObjectStateController","setPushController","getPushController","setQueryController","getQueryController","setRESTController","setSchemaController","getSchemaController","setSessionController","getSessionController","setStorageController","async","setLocalDatastoreController","getLocalDatastoreController","setLocalDatastore","store","getLocalDatastore","getStorageController","setAsyncStorage","storage","getAsyncStorage","setWebSocketController","getWebSocketController","setUserController","getUserController","setLiveQueryController","setHooksController","getHooksController","isLocalDatastoreKey","OBJECT_PREFIX","PIN_PREFIX","DEFAULT_PIN","_startsWith","_aes","_encUtf","CryptoController","encrypt","obj","secretKey","encrypted","toString","decrypt","encryptedText","decryptedStr","_bind","_setTimeout2","_values","_getIterator2","_keys","_map","_indexOf","_assertThisInitialized2","_defineProperty2","_LiveQuerySubscription","CLIENT_STATE","INITIALIZED","CONNECTING","CONNECTED","CLOSED","RECONNECTING","DISCONNECTED","OP_TYPES","CONNECT","SUBSCRIBE","UNSUBSCRIBE","ERROR","OP_EVENTS","SUBSCRIBED","UNSUBSCRIBED","CREATE","UPDATE","ENTER","LEAVE","DELETE","CLIENT_EMMITER_TYPES","CLOSE","OPEN","SUBSCRIPTION_EMMITER_TYPES","generateInterval","k","Math","random","min","pow","LiveQueryClient","_ref","applicationId","serverURL","javascriptKey","masterKey","installationId","reconnectHandle","attempts","requestId","additionalProperties","connectPromise","subscriptions","state","queryJSON","where","undefined","subscribeRequest","subscription","socket","send","_this3","delete","unsubscribeRequest","_this4","WebSocketImplementation","onopen","_handleWebSocketOpen","onmessage","event","_handleWebSocketMessage","onclose","_handleWebSocketClose","onerror","_handleWebSocketError","_this5","close","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_context2","done","err","return","_handleReset","connectRequest","JSON","parse","clientId","resubscribe","resolve","reconnect","_handleReconnect","override","original","field","__type","fromJSON","parseObject","localDatastore","isEnabled","_updateObjectIfPinned","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_context3","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_context4","_context5","_this6","time","clearTimeout","open","WebSocket","run","getJobsData","startJob","getJobStatus","_promise","_decode","_ParseError","_ParseQuery","requestOptions","useMasterKey","jobStatusId","payload","res","INVALID_JSON","decoded","result","_find","_from","_isArray","_keys2","_keys3","_filter","_regenerator","_set","_toConsumableArray2","_slicedToArray2","_asyncToGenerator2","_LocalDatastoreUtils","LocalDatastore","isSyncing","fromPinWithName","pinWithName","unPinWithName","_getAllContents","getAllContents","_getRawStorage","getRawStorage","_clear","clear","_handlePinAllWithName","_handlePinAllWithName2","mark","_callee","objects","pinName","toPinPromises","objectKeys","parent","children","parentKey","objectKey","fromPinPromise","_ref2","pinned","toPin","wrap","prev","getPinName","_getChildren","getKeyForObject","_toFullJSON","_localId","t0","finish","all","sent","abrupt","stop","apply","arguments","_handleUnPinAllWithName","_handleUnPinAllWithName2","_callee2","promises","_objectKeys","hasReference","pinnedObjects","item","t1","t2","t3","encountered","_traverse","objectId","_serializeObjectsFromPinName","_serializeObjectsFromPinName2","_callee3","_concatInstanceProper","_context6","allObjects","_context7","_serializeObject","_serializeObject2","_callee4","LDS","root","queue","meta","uniqueId","nodeId","subTreeRoot","pointer","_context8","_updateObjectIfPinned2","_callee5","_context9","_destroyObjectIfPinned","_destroyObjectIfPinned2","_callee6","pin","_context10","_updateLocalIdForObject","_updateLocalIdForObject2","_callee7","localId","_context11","_context12","localKey","unsaved","_context13","updateFromServer","_updateFromServer","_callee8","_context14","keys","pointersHash","_key$split","_key$split2","queryPromises","responses","pinPromises","_context15","checkIfEnabled","add","objectIds","limit","equalTo","containedIn","_context16","_context17","_getId","_reduce","_Storage","LocalDatastoreController","_fromPinWithName","values","getItemAsync","setItemAsync","removeItemAsync","getAllKeysAsync","previousPromise","toRemove","EventEmitter","uuidv4","iidCache","InstallationController","currentInstallationId","path","generatePath","iid","_clearCache","_setInstallationIdCache","registered","AnonymousUtils","getAuthData"],"mappings":"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","file":"js/chunk-vendors~68d50ece.8fa3c098.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _EventEmitter2 = _interopRequireDefault(require(\"./EventEmitter\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n\nvar _promiseUtils = require(\"./promiseUtils\");\n/*\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n */\n\n/**\n * Creates a new LiveQuery Subscription.\n * Extends events.EventEmitter\n * <a href=\"https://nodejs.org/api/events.html#events_class_eventemitter\">cloud functions</a>.\n *\n * <p>Response Object - Contains data from the client that made the request\n * <ul>\n * <li>clientId</li>\n * <li>installationId - requires Parse Server 4.0.0+</li>\n * </ul>\n * </p>\n *\n * <p>Open Event - When you call query.subscribe(), we send a subscribe request to\n * the LiveQuery server, when we get the confirmation from the LiveQuery server,\n * this event will be emitted. When the client loses WebSocket connection to the\n * LiveQuery server, we will try to auto reconnect the LiveQuery server. If we\n * reconnect the LiveQuery server and successfully resubscribe the ParseQuery,\n * you'll also get this event.\n *\n * <pre>\n * subscription.on('open', (response) => {\n *\n * });</pre></p>\n *\n * <p>Create Event - When a new ParseObject is created and it fulfills the ParseQuery you subscribe,\n * you'll get this event. The object is the ParseObject which is created.\n *\n * <pre>\n * subscription.on('create', (object, response) => {\n *\n * });</pre></p>\n *\n * <p>Update Event - When an existing ParseObject (original) which fulfills the ParseQuery you subscribe\n * is updated (The ParseObject fulfills the ParseQuery before and after changes),\n * you'll get this event. The object is the ParseObject which is updated.\n * Its content is the latest value of the ParseObject.\n *\n * Parse-Server 3.1.3+ Required for original object parameter\n *\n * <pre>\n * subscription.on('update', (object, original, response) => {\n *\n * });</pre></p>\n *\n * <p>Enter Event - When an existing ParseObject's (original) old value doesn't fulfill the ParseQuery\n * but its new value fulfills the ParseQuery, you'll get this event. The object is the\n * ParseObject which enters the ParseQuery. Its content is the latest value of the ParseObject.\n *\n * Parse-Server 3.1.3+ Required for original object parameter\n *\n * <pre>\n * subscription.on('enter', (object, original, response) => {\n *\n * });</pre></p>\n *\n *\n * <p>Update Event - When an existing ParseObject's old value fulfills the ParseQuery but its new value\n * doesn't fulfill the ParseQuery, you'll get this event. The object is the ParseObject\n * which leaves the ParseQuery. Its content is the latest value of the ParseObject.\n *\n * <pre>\n * subscription.on('leave', (object, response) => {\n *\n * });</pre></p>\n *\n *\n * <p>Delete Event - When an existing ParseObject which fulfills the ParseQuery is deleted, you'll\n * get this event. The object is the ParseObject which is deleted.\n *\n * <pre>\n * subscription.on('delete', (object, response) => {\n *\n * });</pre></p>\n *\n *\n * <p>Close Event - When the client loses the WebSocket connection to the LiveQuery\n * server and we stop receiving events, you'll get this event.\n *\n * <pre>\n * subscription.on('close', () => {\n *\n * });</pre></p>\n *\n * @alias Parse.LiveQuerySubscription\n */\n\n\nvar Subscription =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  (0, _inherits2.default)(Subscription, _EventEmitter);\n  /*\n   * @param {string} id - subscription id\n   * @param {string} query - query to subscribe to\n   * @param {string} sessionToken - optional session token\n   */\n\n  function Subscription(id, query, sessionToken) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Subscription);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(Subscription).call(this));\n    _this.id = id;\n    _this.query = query;\n    _this.sessionToken = sessionToken;\n    _this.subscribePromise = (0, _promiseUtils.resolvingPromise)();\n    _this.subscribed = false; // adding listener so process does not crash\n    // best practice is for developer to register their own listener\n\n    _this.on('error', function () {});\n\n    return _this;\n  }\n  /**\n   * Close the subscription\n   */\n\n\n  (0, _createClass2.default)(Subscription, [{\n    key: \"unsubscribe\",\n    value: function ()\n    /*: Promise*/\n    {\n      var _this2 = this;\n\n      return _CoreManager.default.getLiveQueryController().getDefaultLiveQueryClient().then(function (liveQueryClient) {\n        liveQueryClient.unsubscribe(_this2);\n\n        _this2.emit('close');\n      });\n    }\n  }]);\n  return Subscription;\n}(_EventEmitter2.default);\n\nvar _default = Subscription;\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _ParseUser = _interopRequireDefault(require(\"./ParseUser\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow-weak\n */\n\n/* global FB */\n\n\nvar initialized = false;\nvar requestedPermissions;\nvar initOptions;\nvar provider = {\n  authenticate: function (options) {\n    var _this = this;\n\n    if (typeof FB === 'undefined') {\n      options.error(this, 'Facebook SDK not found.');\n    }\n\n    FB.login(function (response) {\n      if (response.authResponse) {\n        if (options.success) {\n          options.success(_this, {\n            id: response.authResponse.userID,\n            access_token: response.authResponse.accessToken,\n            expiration_date: new Date(response.authResponse.expiresIn * 1000 + new Date().getTime()).toJSON()\n          });\n        }\n      } else {\n        if (options.error) {\n          options.error(_this, response);\n        }\n      }\n    }, {\n      scope: requestedPermissions\n    });\n  },\n  restoreAuthentication: function (authData) {\n    if (authData) {\n      var newOptions = {};\n\n      if (initOptions) {\n        for (var key in initOptions) {\n          newOptions[key] = initOptions[key];\n        }\n      } // Suppress checks for login status from the browser.\n\n\n      newOptions.status = false; // If the user doesn't match the one known by the FB SDK, log out.\n      // Most of the time, the users will match -- it's only in cases where\n      // the FB SDK knows of a different user than the one being restored\n      // from a Parse User that logged in with username/password.\n\n      var existingResponse = FB.getAuthResponse();\n\n      if (existingResponse && existingResponse.userID !== authData.id) {\n        FB.logout();\n      }\n\n      FB.init(newOptions);\n    }\n\n    return true;\n  },\n  getAuthType: function () {\n    return 'facebook';\n  },\n  deauthenticate: function () {\n    this.restoreAuthentication(null);\n  }\n};\n/**\n * Provides a set of utilities for using Parse with Facebook.\n * @class Parse.FacebookUtils\n * @static\n * @hideconstructor\n */\n\nvar FacebookUtils = {\n  /**\n   * Initializes Parse Facebook integration.  Call this function after you\n   * have loaded the Facebook Javascript SDK with the same parameters\n   * as you would pass to<code>\n   * <a href=\n   * \"https://developers.facebook.com/docs/reference/javascript/FB.init/\">\n   * FB.init()</a></code>.  Parse.FacebookUtils will invoke FB.init() for you\n   * with these arguments.\n   *\n   * @method init\n   * @name Parse.FacebookUtils.init\n   * @param {Object} options Facebook options argument as described here:\n   *   <a href=\n   *   \"https://developers.facebook.com/docs/reference/javascript/FB.init/\">\n   *   FB.init()</a>. The status flag will be coerced to 'false' because it\n   *   interferes with Parse Facebook integration. Call FB.getLoginStatus()\n   *   explicitly if this behavior is required by your application.\n   */\n  init: function (options) {\n    if (typeof FB === 'undefined') {\n      throw new Error('The Facebook JavaScript SDK must be loaded before calling init.');\n    }\n\n    initOptions = {};\n\n    if (options) {\n      for (var key in options) {\n        initOptions[key] = options[key];\n      }\n    }\n\n    if (initOptions.status && typeof console !== 'undefined') {\n      var warn = console.warn || console.log || function () {}; // eslint-disable-line no-console\n\n\n      warn.call(console, 'The \"status\" flag passed into' + ' FB.init, when set to true, can interfere with Parse Facebook' + ' integration, so it has been suppressed. Please call' + ' FB.getLoginStatus() explicitly if you require this behavior.');\n    }\n\n    initOptions.status = false;\n    FB.init(initOptions);\n\n    _ParseUser.default._registerAuthenticationProvider(provider);\n\n    initialized = true;\n  },\n\n  /**\n   * Gets whether the user has their account linked to Facebook.\n   *\n   * @method isLinked\n   * @name Parse.FacebookUtils.isLinked\n   * @param {Parse.User} user User to check for a facebook link.\n   *     The user must be logged in on this device.\n   * @return {Boolean} <code>true</code> if the user has their account\n   *     linked to Facebook.\n   */\n  isLinked: function (user) {\n    return user._isLinked('facebook');\n  },\n\n  /**\n   * Logs in a user using Facebook. This method delegates to the Facebook\n   * SDK to authenticate the user, and then automatically logs in (or\n   * creates, in the case where it is a new user) a Parse.User.\n   *\n   * Standard API:\n   *\n   * <code>logIn(permission: string, authData: Object);</code>\n   *\n   * Advanced API: Used for handling your own oAuth tokens\n   * {@link https://docs.parseplatform.org/rest/guide/#linking-users}\n   *\n   * <code>logIn(authData: Object, options?: Object);</code>\n   *\n   * @method logIn\n   * @name Parse.FacebookUtils.logIn\n   * @param {(String|Object)} permissions The permissions required for Facebook\n   *    log in.  This is a comma-separated string of permissions.\n   *    Alternatively, supply a Facebook authData object as described in our\n   *    REST API docs if you want to handle getting facebook auth tokens\n   *    yourself.\n   * @param {Object} options MasterKey / SessionToken. Alternatively can be used for authData if permissions is a string\n   * @returns {Promise}\n   */\n  logIn: function (permissions, options) {\n    if (!permissions || typeof permissions === 'string') {\n      if (!initialized) {\n        throw new Error('You must initialize FacebookUtils before calling logIn.');\n      }\n\n      requestedPermissions = permissions;\n      return _ParseUser.default.logInWith('facebook', options);\n    }\n\n    return _ParseUser.default.logInWith('facebook', {\n      authData: permissions\n    }, options);\n  },\n\n  /**\n   * Links Facebook to an existing PFUser. This method delegates to the\n   * Facebook SDK to authenticate the user, and then automatically links\n   * the account to the Parse.User.\n   *\n   * Standard API:\n   *\n   * <code>link(user: Parse.User, permission: string, authData?: Object);</code>\n   *\n   * Advanced API: Used for handling your own oAuth tokens\n   * {@link https://docs.parseplatform.org/rest/guide/#linking-users}\n   *\n   * <code>link(user: Parse.User, authData: Object, options?: FullOptions);</code>\n   *\n   * @method link\n   * @name Parse.FacebookUtils.link\n   * @param {Parse.User} user User to link to Facebook. This must be the\n   *     current user.\n   * @param {(String|Object)} permissions The permissions required for Facebook\n   *    log in.  This is a comma-separated string of permissions.\n   *    Alternatively, supply a Facebook authData object as described in our\n   *    REST API docs if you want to handle getting facebook auth tokens\n   *    yourself.\n   * @param {Object} options MasterKey / SessionToken. Alternatively can be used for authData if permissions is a string\n   * @returns {Promise}\n   */\n  link: function (user, permissions, options) {\n    if (!permissions || typeof permissions === 'string') {\n      if (!initialized) {\n        throw new Error('You must initialize FacebookUtils before calling link.');\n      }\n\n      requestedPermissions = permissions;\n      return user.linkWith('facebook', options);\n    }\n\n    return user.linkWith('facebook', {\n      authData: permissions\n    }, options);\n  },\n\n  /**\n   * Unlinks the Parse.User from a Facebook account.\n   *\n   * @method unlink\n   * @name Parse.FacebookUtils.unlink\n   * @param {Parse.User} user User to unlink from Facebook. This must be the\n   *     current user.\n   * @param {Object} options Standard options object with success and error\n   *    callbacks.\n   * @returns {Promise}\n   */\n  unlink: function (user, options) {\n    if (!initialized) {\n      throw new Error('You must initialize FacebookUtils before calling unlink.');\n    }\n\n    return user._unlinkFrom('facebook', options);\n  },\n  // Used for testing purposes\n  _getAuthProvider: function () {\n    return provider;\n  }\n};\nvar _default = FacebookUtils;\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.defaultState = defaultState;\nexports.setServerData = setServerData;\nexports.setPendingOp = setPendingOp;\nexports.pushPendingState = pushPendingState;\nexports.popPendingState = popPendingState;\nexports.mergeFirstPendingState = mergeFirstPendingState;\nexports.estimateAttribute = estimateAttribute;\nexports.estimateAttributes = estimateAttributes;\nexports.commitServerChanges = commitServerChanges;\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _assign = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/assign\"));\n\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _ParseFile = _interopRequireDefault(require(\"./ParseFile\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\n\nvar _TaskQueue = _interopRequireDefault(require(\"./TaskQueue\"));\n\nvar _ParseOp = require(\"./ParseOp\");\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n\nfunction defaultState()\n/*: State*/\n{\n  return {\n    serverData: {},\n    pendingOps: [{}],\n    objectCache: {},\n    tasks: new _TaskQueue.default(),\n    existed: false\n  };\n}\n\nfunction setServerData(serverData\n/*: AttributeMap*/\n, attributes\n/*: AttributeMap*/\n) {\n  for (var _attr in attributes) {\n    if (typeof attributes[_attr] !== 'undefined') {\n      serverData[_attr] = attributes[_attr];\n    } else {\n      delete serverData[_attr];\n    }\n  }\n}\n\nfunction setPendingOp(pendingOps\n/*: Array<OpsMap>*/\n, attr\n/*: string*/\n, op\n/*: ?Op*/\n) {\n  var last = pendingOps.length - 1;\n\n  if (op) {\n    pendingOps[last][attr] = op;\n  } else {\n    delete pendingOps[last][attr];\n  }\n}\n\nfunction pushPendingState(pendingOps\n/*: Array<OpsMap>*/\n) {\n  pendingOps.push({});\n}\n\nfunction popPendingState(pendingOps\n/*: Array<OpsMap>*/\n)\n/*: OpsMap*/\n{\n  var first = pendingOps.shift();\n\n  if (!pendingOps.length) {\n    pendingOps[0] = {};\n  }\n\n  return first;\n}\n\nfunction mergeFirstPendingState(pendingOps\n/*: Array<OpsMap>*/\n) {\n  var first = popPendingState(pendingOps);\n  var next = pendingOps[0];\n\n  for (var _attr2 in first) {\n    if (next[_attr2] && first[_attr2]) {\n      var merged = next[_attr2].mergeWith(first[_attr2]);\n\n      if (merged) {\n        next[_attr2] = merged;\n      }\n    } else {\n      next[_attr2] = first[_attr2];\n    }\n  }\n}\n\nfunction estimateAttribute(serverData\n/*: AttributeMap*/\n, pendingOps\n/*: Array<OpsMap>*/\n, className\n/*: string*/\n, id\n/*: ?string*/\n, attr\n/*: string*/\n)\n/*: mixed*/\n{\n  var value = serverData[attr];\n\n  for (var i = 0; i < pendingOps.length; i++) {\n    if (pendingOps[i][attr]) {\n      if (pendingOps[i][attr] instanceof _ParseOp.RelationOp) {\n        if (id) {\n          value = pendingOps[i][attr].applyTo(value, {\n            className: className,\n            id: id\n          }, attr);\n        }\n      } else {\n        value = pendingOps[i][attr].applyTo(value);\n      }\n    }\n  }\n\n  return value;\n}\n\nfunction estimateAttributes(serverData\n/*: AttributeMap*/\n, pendingOps\n/*: Array<OpsMap>*/\n, className\n/*: string*/\n, id\n/*: ?string*/\n)\n/*: AttributeMap*/\n{\n  var data = {};\n\n  for (var attr in serverData) {\n    data[attr] = serverData[attr];\n  }\n\n  for (var i = 0; i < pendingOps.length; i++) {\n    for (attr in pendingOps[i]) {\n      if (pendingOps[i][attr] instanceof _ParseOp.RelationOp) {\n        if (id) {\n          data[attr] = pendingOps[i][attr].applyTo(data[attr], {\n            className: className,\n            id: id\n          }, attr);\n        }\n      } else {\n        if ((0, _includes.default)(attr).call(attr, '.')) {\n          // convert a.b.c into { a: { b: { c: value } } }\n          var fields = attr.split('.');\n          var last = fields[fields.length - 1];\n          var object = (0, _assign.default)({}, data);\n\n          for (var _i = 0; _i < fields.length - 1; _i++) {\n            object = object[fields[_i]];\n          }\n\n          object[last] = pendingOps[i][attr].applyTo(object[last]);\n        } else {\n          data[attr] = pendingOps[i][attr].applyTo(data[attr]);\n        }\n      }\n    }\n  }\n\n  return data;\n}\n\nfunction commitServerChanges(serverData\n/*: AttributeMap*/\n, objectCache\n/*: ObjectCache*/\n, changes\n/*: AttributeMap*/\n) {\n  for (var _attr3 in changes) {\n    var val = changes[_attr3];\n    serverData[_attr3] = val;\n\n    if (val && (0, _typeof2.default)(val) === 'object' && !(val instanceof _ParseObject.default) && !(val instanceof _ParseFile.default) && !(val instanceof _ParseRelation.default)) {\n      var json = (0, _encode.default)(val, false, true);\n      objectCache[_attr3] = (0, _stringify.default)(json);\n    }\n  }\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.track = track;\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n/**\n * Parse.Analytics provides an interface to Parse's logging and analytics\n * backend.\n *\n * @class Parse.Analytics\n * @static\n * @hideconstructor\n */\n\n/**\n  * Tracks the occurrence of a custom event with additional dimensions.\n  * Parse will store a data point at the time of invocation with the given\n  * event name.\n  *\n  * Dimensions will allow segmentation of the occurrences of this custom\n  * event. Keys and values should be {@code String}s, and will throw\n  * otherwise.\n  *\n  * To track a user signup along with additional metadata, consider the\n  * following:\n  * <pre>\n  * var dimensions = {\n  *  gender: 'm',\n  *  source: 'web',\n  *  dayType: 'weekend'\n  * };\n  * Parse.Analytics.track('signup', dimensions);\n  * </pre>\n  *\n  * There is a default limit of 8 dimensions per event tracked.\n  *\n  * @method track\n  * @name Parse.Analytics.track\n  * @param {String} name The name of the custom event to report to Parse as\n  * having happened.\n  * @param {Object} dimensions The dictionary of information by which to\n  * segment this event.\n  * @return {Promise} A promise that is resolved when the round-trip\n  * to the server completes.\n  */\n\n\nfunction track(name\n/*: string*/\n, dimensions\n/*: { [key: string]: string }*/\n)\n/*: Promise*/\n{\n  name = name || '';\n  name = name.replace(/^\\s*/, '');\n  name = name.replace(/\\s*$/, '');\n\n  if (name.length === 0) {\n    throw new TypeError('A name for the custom event must be provided');\n  }\n\n  for (var _key in dimensions) {\n    if (typeof _key !== 'string' || typeof dimensions[_key] !== 'string') {\n      throw new TypeError('track() dimensions expects keys and values of type \"string\".');\n    }\n  }\n\n  return _CoreManager.default.getAnalyticsController().track(name, dimensions);\n}\n\nvar DefaultController = {\n  track: function (name, dimensions) {\n    var RESTController = _CoreManager.default.getRESTController();\n\n    return RESTController.request('POST', 'events/' + name, {\n      dimensions: dimensions\n    });\n  }\n};\n\n_CoreManager.default.setAnalyticsController(DefaultController);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\n/*\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n/*:: import type { AttributeMap, ObjectCache, OpsMap, State } from './ObjectStateMutations';*/\n\n/*:: import type ParseFile from './ParseFile';*/\n\n/*:: import type { FileSource } from './ParseFile';*/\n\n/*:: import type { Op } from './ParseOp';*/\n\n/*:: import type ParseObject from './ParseObject';*/\n\n/*:: import type { QueryJSON } from './ParseQuery';*/\n\n/*:: import type ParseUser from './ParseUser';*/\n\n/*:: import type { AuthData } from './ParseUser';*/\n\n/*:: import type { PushData } from './Push';*/\n\n/*:: import type { RequestOptions, FullOptions } from './RESTController';*/\n\n/*:: type AnalyticsController = {\n  track: (name: string, dimensions: { [key: string]: string }) => Promise;\n};*/\n\n/*:: type CloudController = {\n  run: (name: string, data: mixed, options: RequestOptions) => Promise;\n  getJobsData: (options: RequestOptions) => Promise;\n  startJob: (name: string, data: mixed, options: RequestOptions) => Promise;\n};*/\n\n/*:: type ConfigController = {\n  current: () => Promise;\n  get: () => Promise;\n  save: (attrs: { [key: string]: any }) => Promise;\n};*/\n\n/*:: type CryptoController = {\n  encrypt: (obj: any, secretKey: string) => string;\n  decrypt: (encryptedText: string, secretKey: any) => string;\n};*/\n\n/*:: type FileController = {\n  saveFile: (name: string, source: FileSource, options: FullOptions) => Promise;\n  saveBase64: (name: string, source: FileSource, options: FullOptions) => Promise;\n  download: (uri: string) => Promise;\n};*/\n\n/*:: type InstallationController = {\n  currentInstallationId: () => Promise;\n};*/\n\n/*:: type ObjectController = {\n  fetch: (object: ParseObject | Array<ParseObject>, forceFetch: boolean, options: RequestOptions) => Promise;\n  save: (object: ParseObject | Array<ParseObject | ParseFile>, options: RequestOptions) => Promise;\n  destroy: (object: ParseObject | Array<ParseObject>, options: RequestOptions) => Promise;\n};*/\n\n/*:: type ObjectStateController = {\n  getState: (obj: any) => ?State;\n  initializeState: (obj: any, initial?: State) => State;\n  removeState: (obj: any) => ?State;\n  getServerData: (obj: any) => AttributeMap;\n  setServerData: (obj: any, attributes: AttributeMap) => void;\n  getPendingOps: (obj: any) => Array<OpsMap>;\n  setPendingOp: (obj: any, attr: string, op: ?Op) => void;\n  pushPendingState: (obj: any) => void;\n  popPendingState: (obj: any) => OpsMap;\n  mergeFirstPendingState: (obj: any) => void;\n  getObjectCache: (obj: any) => ObjectCache;\n  estimateAttribute: (obj: any, attr: string) => mixed;\n  estimateAttributes: (obj: any) => AttributeMap;\n  commitServerChanges: (obj: any, changes: AttributeMap) => void;\n  enqueueTask: (obj: any, task: () => Promise) => Promise;\n  clearAllState: () => void;\n  duplicateState: (source: any, dest: any) => void;\n};*/\n\n/*:: type PushController = {\n  send: (data: PushData, options: RequestOptions) => Promise;\n};*/\n\n/*:: type QueryController = {\n  find: (className: string, params: QueryJSON, options: RequestOptions) => Promise;\n  aggregate: (className: string, params: any, options: RequestOptions) => Promise;\n};*/\n\n/*:: type RESTController = {\n  request: (method: string, path: string, data: mixed, options: RequestOptions) => Promise;\n  ajax: (method: string, url: string, data: any, headers?: any, options: FullOptions) => Promise;\n};*/\n\n/*:: type SchemaController = {\n  purge: (className: string) => Promise;\n  get: (className: string, options: RequestOptions) => Promise;\n  delete: (className: string, options: RequestOptions) => Promise;\n  create: (className: string, params: any, options: RequestOptions) => Promise;\n  update: (className: string, params: any, options: RequestOptions) => Promise;\n  send(className: string, method: string, params: any, options: RequestOptions): Promise;\n};*/\n\n/*:: type SessionController = {\n  getSession: (token: RequestOptions) => Promise;\n};*/\n\n/*:: type StorageController = {\n  async: 0;\n  getItem: (path: string) => ?string;\n  setItem: (path: string, value: string) => void;\n  removeItem: (path: string) => void;\n  getItemAsync?: (path: string) => Promise;\n  setItemAsync?: (path: string, value: string) => Promise;\n  removeItemAsync?: (path: string) => Promise;\n  clear: () => void;\n} | {\n  async: 1;\n  getItem?: (path: string) => ?string;\n  setItem?: (path: string, value: string) => void;\n  removeItem?: (path: string) => void;\n  getItemAsync: (path: string) => Promise;\n  setItemAsync: (path: string, value: string) => Promise;\n  removeItemAsync: (path: string) => Promise;\n  clear: () => void;\n};*/\n\n/*:: type LocalDatastoreController = {\n  fromPinWithName: (name: string) => ?any;\n  pinWithName: (name: string, objects: any) => void;\n  unPinWithName: (name: string) => void;\n  getAllContents: () => ?any;\n  clear: () => void;\n};*/\n\n/*:: type UserController = {\n  setCurrentUser: (user: ParseUser) => Promise;\n  currentUser: () => ?ParseUser;\n  currentUserAsync: () => Promise;\n  signUp: (user: ParseUser, attrs: AttributeMap, options: RequestOptions) => Promise;\n  logIn: (user: ParseUser, options: RequestOptions) => Promise;\n  become: (options: RequestOptions) => Promise;\n  hydrate: (userJSON: AttributeMap) => Promise;\n  logOut: (options: RequestOptions) => Promise;\n  me: (options: RequestOptions) => Promise;\n  requestPasswordReset: (email: string, options: RequestOptions) => Promise;\n  updateUserOnDisk: (user: ParseUser) => Promise;\n  upgradeToRevocableSession: (user: ParseUser, options: RequestOptions) => Promise;\n  linkWith: (user: ParseUser, authData: AuthData) => Promise;\n  removeUserFromDisk: () => Promise;\n};*/\n\n/*:: type HooksController = {\n  get: (type: string, functionName?: string, triggerName?: string) => Promise;\n  create: (hook: mixed) => Promise;\n  delete: (hook: mixed) => Promise;\n  update: (hook: mixed) => Promise;\n  send: (method: string, path: string, body?: mixed) => Promise;\n};*/\n\n/*:: type WebSocketController = {\n  onopen: () => void;\n  onmessage: (message: any) => void;\n  onclose: () => void;\n  onerror: (error: any) => void;\n  send: (data: any) => void;\n  close: () => void;\n}*/\n\n/*:: type Config = {\n  AnalyticsController?: AnalyticsController,\n  CloudController?: CloudController,\n  ConfigController?: ConfigController,\n  FileController?: FileController,\n  InstallationController?: InstallationController,\n  ObjectController?: ObjectController,\n  ObjectStateController?: ObjectStateController,\n  PushController?: PushController,\n  QueryController?: QueryController,\n  RESTController?: RESTController,\n  SchemaController?: SchemaController,\n  SessionController?: SessionController,\n  StorageController?: StorageController,\n  LocalDatastoreController?: LocalDatastoreController,\n  UserController?: UserController,\n  HooksController?: HooksController,\n  WebSocketController?: WebSocketController,\n};*/\n\n\nvar config\n/*: Config & { [key: string]: mixed }*/\n= {\n  // Defaults\n  IS_NODE: typeof process !== 'undefined' && !!process.versions && !!process.versions.node && !process.versions.electron,\n  REQUEST_ATTEMPT_LIMIT: 5,\n  REQUEST_HEADERS: {},\n  SERVER_URL: 'https://api.parse.com/1',\n  SERVER_AUTH_TYPE: null,\n  SERVER_AUTH_TOKEN: null,\n  LIVEQUERY_SERVER_URL: null,\n  ENCRYPTED_KEY: null,\n  VERSION: 'js' + \"2.11.0\",\n  APPLICATION_ID: null,\n  JAVASCRIPT_KEY: null,\n  MASTER_KEY: null,\n  USE_MASTER_KEY: false,\n  PERFORM_USER_REWRITE: true,\n  FORCE_REVOCABLE_SESSION: false,\n  ENCRYPTED_USER: false\n};\n\nfunction requireMethods(name\n/*: string*/\n, methods\n/*: Array<string>*/\n, controller\n/*: any*/\n) {\n  (0, _forEach.default)(methods).call(methods, function (func) {\n    if (typeof controller[func] !== 'function') {\n      var _context;\n\n      throw new Error((0, _concat.default)(_context = \"\".concat(name, \" must implement \")).call(_context, func, \"()\"));\n    }\n  });\n}\n\nmodule.exports = {\n  get: function (key\n  /*: string*/\n  )\n  /*: any*/\n  {\n    if (config.hasOwnProperty(key)) {\n      return config[key];\n    }\n\n    throw new Error('Configuration key not found: ' + key);\n  },\n  set: function (key\n  /*: string*/\n  , value\n  /*: any*/\n  )\n  /*: void*/\n  {\n    config[key] = value;\n  },\n\n  /* Specialized Controller Setters/Getters */\n  setAnalyticsController: function (controller\n  /*: AnalyticsController*/\n  ) {\n    requireMethods('AnalyticsController', ['track'], controller);\n    config['AnalyticsController'] = controller;\n  },\n  getAnalyticsController: function ()\n  /*: AnalyticsController*/\n  {\n    return config['AnalyticsController'];\n  },\n  setCloudController: function (controller\n  /*: CloudController*/\n  ) {\n    requireMethods('CloudController', ['run', 'getJobsData', 'startJob'], controller);\n    config['CloudController'] = controller;\n  },\n  getCloudController: function ()\n  /*: CloudController*/\n  {\n    return config['CloudController'];\n  },\n  setConfigController: function (controller\n  /*: ConfigController*/\n  ) {\n    requireMethods('ConfigController', ['current', 'get', 'save'], controller);\n    config['ConfigController'] = controller;\n  },\n  getConfigController: function ()\n  /*: ConfigController*/\n  {\n    return config['ConfigController'];\n  },\n  setCryptoController: function (controller\n  /*: CryptoController*/\n  ) {\n    requireMethods('CryptoController', ['encrypt', 'decrypt'], controller);\n    config['CryptoController'] = controller;\n  },\n  getCryptoController: function ()\n  /*: CryptoController*/\n  {\n    return config['CryptoController'];\n  },\n  setFileController: function (controller\n  /*: FileController*/\n  ) {\n    requireMethods('FileController', ['saveFile', 'saveBase64'], controller);\n    config['FileController'] = controller;\n  },\n  getFileController: function ()\n  /*: FileController*/\n  {\n    return config['FileController'];\n  },\n  setInstallationController: function (controller\n  /*: InstallationController*/\n  ) {\n    requireMethods('InstallationController', ['currentInstallationId'], controller);\n    config['InstallationController'] = controller;\n  },\n  getInstallationController: function ()\n  /*: InstallationController*/\n  {\n    return config['InstallationController'];\n  },\n  setObjectController: function (controller\n  /*: ObjectController*/\n  ) {\n    requireMethods('ObjectController', ['save', 'fetch', 'destroy'], controller);\n    config['ObjectController'] = controller;\n  },\n  getObjectController: function ()\n  /*: ObjectController*/\n  {\n    return config['ObjectController'];\n  },\n  setObjectStateController: function (controller\n  /*: ObjectStateController*/\n  ) {\n    requireMethods('ObjectStateController', ['getState', 'initializeState', 'removeState', 'getServerData', 'setServerData', 'getPendingOps', 'setPendingOp', 'pushPendingState', 'popPendingState', 'mergeFirstPendingState', 'getObjectCache', 'estimateAttribute', 'estimateAttributes', 'commitServerChanges', 'enqueueTask', 'clearAllState'], controller);\n    config['ObjectStateController'] = controller;\n  },\n  getObjectStateController: function ()\n  /*: ObjectStateController*/\n  {\n    return config['ObjectStateController'];\n  },\n  setPushController: function (controller\n  /*: PushController*/\n  ) {\n    requireMethods('PushController', ['send'], controller);\n    config['PushController'] = controller;\n  },\n  getPushController: function ()\n  /*: PushController*/\n  {\n    return config['PushController'];\n  },\n  setQueryController: function (controller\n  /*: QueryController*/\n  ) {\n    requireMethods('QueryController', ['find', 'aggregate'], controller);\n    config['QueryController'] = controller;\n  },\n  getQueryController: function ()\n  /*: QueryController*/\n  {\n    return config['QueryController'];\n  },\n  setRESTController: function (controller\n  /*: RESTController*/\n  ) {\n    requireMethods('RESTController', ['request', 'ajax'], controller);\n    config['RESTController'] = controller;\n  },\n  getRESTController: function ()\n  /*: RESTController*/\n  {\n    return config['RESTController'];\n  },\n  setSchemaController: function (controller\n  /*: SchemaController*/\n  ) {\n    requireMethods('SchemaController', ['get', 'create', 'update', 'delete', 'send', 'purge'], controller);\n    config['SchemaController'] = controller;\n  },\n  getSchemaController: function ()\n  /*: SchemaController*/\n  {\n    return config['SchemaController'];\n  },\n  setSessionController: function (controller\n  /*: SessionController*/\n  ) {\n    requireMethods('SessionController', ['getSession'], controller);\n    config['SessionController'] = controller;\n  },\n  getSessionController: function ()\n  /*: SessionController*/\n  {\n    return config['SessionController'];\n  },\n  setStorageController: function (controller\n  /*: StorageController*/\n  ) {\n    if (controller.async) {\n      requireMethods('An async StorageController', ['getItemAsync', 'setItemAsync', 'removeItemAsync', 'getAllKeysAsync'], controller);\n    } else {\n      requireMethods('A synchronous StorageController', ['getItem', 'setItem', 'removeItem', 'getAllKeys'], controller);\n    }\n\n    config['StorageController'] = controller;\n  },\n  setLocalDatastoreController: function (controller\n  /*: LocalDatastoreController*/\n  ) {\n    requireMethods('LocalDatastoreController', ['pinWithName', 'fromPinWithName', 'unPinWithName', 'getAllContents', 'clear'], controller);\n    config['LocalDatastoreController'] = controller;\n  },\n  getLocalDatastoreController: function ()\n  /*: LocalDatastoreController*/\n  {\n    return config['LocalDatastoreController'];\n  },\n  setLocalDatastore: function (store\n  /*: any*/\n  ) {\n    config['LocalDatastore'] = store;\n  },\n  getLocalDatastore: function () {\n    return config['LocalDatastore'];\n  },\n  getStorageController: function ()\n  /*: StorageController*/\n  {\n    return config['StorageController'];\n  },\n  setAsyncStorage: function (storage\n  /*: any*/\n  ) {\n    config['AsyncStorage'] = storage;\n  },\n  getAsyncStorage: function () {\n    return config['AsyncStorage'];\n  },\n  setWebSocketController: function (controller\n  /*: WebSocketController*/\n  ) {\n    config['WebSocketController'] = controller;\n  },\n  getWebSocketController: function ()\n  /*: WebSocketController*/\n  {\n    return config['WebSocketController'];\n  },\n  setUserController: function (controller\n  /*: UserController*/\n  ) {\n    requireMethods('UserController', ['setCurrentUser', 'currentUser', 'currentUserAsync', 'signUp', 'logIn', 'become', 'logOut', 'me', 'requestPasswordReset', 'upgradeToRevocableSession', 'linkWith'], controller);\n    config['UserController'] = controller;\n  },\n  getUserController: function ()\n  /*: UserController*/\n  {\n    return config['UserController'];\n  },\n  setLiveQueryController: function (controller\n  /*: any*/\n  ) {\n    requireMethods('LiveQueryController', ['setDefaultLiveQueryClient', 'getDefaultLiveQueryClient', '_clearCachedDefaultClient'], controller);\n    config['LiveQueryController'] = controller;\n  },\n  getLiveQueryController: function ()\n  /*: any*/\n  {\n    return config['LiveQueryController'];\n  },\n  setHooksController: function (controller\n  /*: HooksController*/\n  ) {\n    requireMethods('HooksController', ['create', 'get', 'update', 'remove'], controller);\n    config['HooksController'] = controller;\n  },\n  getHooksController: function ()\n  /*: HooksController*/\n  {\n    return config['HooksController'];\n  }\n};","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.isLocalDatastoreKey = isLocalDatastoreKey;\nexports.OBJECT_PREFIX = exports.PIN_PREFIX = exports.DEFAULT_PIN = void 0;\n\nvar _startsWith = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/starts-with\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n\nvar DEFAULT_PIN = '_default';\nexports.DEFAULT_PIN = DEFAULT_PIN;\nvar PIN_PREFIX = 'parsePin_';\nexports.PIN_PREFIX = PIN_PREFIX;\nvar OBJECT_PREFIX = 'Parse_LDS_';\nexports.OBJECT_PREFIX = OBJECT_PREFIX;\n\nfunction isLocalDatastoreKey(key\n/*: string*/\n)\n/*: boolean*/\n{\n  return !!(key && (key === DEFAULT_PIN || (0, _startsWith.default)(key).call(key, PIN_PREFIX) || (0, _startsWith.default)(key).call(key, OBJECT_PREFIX)));\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _aes = _interopRequireDefault(require(\"crypto-js/aes\"));\n\nvar _encUtf = _interopRequireDefault(require(\"crypto-js/enc-utf8\"));\n\nvar CryptoController = {\n  encrypt: function (obj\n  /*: any*/\n  , secretKey\n  /*: string*/\n  )\n  /*: ?string*/\n  {\n    var encrypted = _aes.default.encrypt((0, _stringify.default)(obj), secretKey);\n\n    return encrypted.toString();\n  },\n  decrypt: function (encryptedText\n  /*: string*/\n  , secretKey\n  /*: string*/\n  )\n  /*: ?string*/\n  {\n    var decryptedStr = _aes.default.decrypt(encryptedText, secretKey).toString(_encUtf.default);\n\n    return decryptedStr;\n  }\n};\nmodule.exports = CryptoController;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _bind = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/bind\"));\n\nvar _setTimeout2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"));\n\nvar _values = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/values\"));\n\nvar _getIterator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js/get-iterator\"));\n\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/keys\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/map\"));\n\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n\nvar _EventEmitter2 = _interopRequireDefault(require(\"./EventEmitter\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _LiveQuerySubscription = _interopRequireDefault(require(\"./LiveQuerySubscription\"));\n\nvar _promiseUtils = require(\"./promiseUtils\");\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n */\n\n/* global WebSocket */\n// The LiveQuery client inner state\n\n\nvar CLIENT_STATE = {\n  INITIALIZED: 'initialized',\n  CONNECTING: 'connecting',\n  CONNECTED: 'connected',\n  CLOSED: 'closed',\n  RECONNECTING: 'reconnecting',\n  DISCONNECTED: 'disconnected'\n}; // The event type the LiveQuery client should sent to server\n\nvar OP_TYPES = {\n  CONNECT: 'connect',\n  SUBSCRIBE: 'subscribe',\n  UNSUBSCRIBE: 'unsubscribe',\n  ERROR: 'error'\n}; // The event we get back from LiveQuery server\n\nvar OP_EVENTS = {\n  CONNECTED: 'connected',\n  SUBSCRIBED: 'subscribed',\n  UNSUBSCRIBED: 'unsubscribed',\n  ERROR: 'error',\n  CREATE: 'create',\n  UPDATE: 'update',\n  ENTER: 'enter',\n  LEAVE: 'leave',\n  DELETE: 'delete'\n}; // The event the LiveQuery client should emit\n\nvar CLIENT_EMMITER_TYPES = {\n  CLOSE: 'close',\n  ERROR: 'error',\n  OPEN: 'open'\n}; // The event the LiveQuery subscription should emit\n\nvar SUBSCRIPTION_EMMITER_TYPES = {\n  OPEN: 'open',\n  CLOSE: 'close',\n  ERROR: 'error',\n  CREATE: 'create',\n  UPDATE: 'update',\n  ENTER: 'enter',\n  LEAVE: 'leave',\n  DELETE: 'delete'\n};\n\nvar generateInterval = function (k) {\n  return Math.random() * Math.min(30, Math.pow(2, k) - 1) * 1000;\n};\n/**\n * Creates a new LiveQueryClient.\n * Extends events.EventEmitter\n * <a href=\"https://nodejs.org/api/events.html#events_class_eventemitter\">cloud functions</a>.\n *\n * A wrapper of a standard WebSocket client. We add several useful methods to\n * help you connect/disconnect to LiveQueryServer, subscribe/unsubscribe a ParseQuery easily.\n *\n * javascriptKey and masterKey are used for verifying the LiveQueryClient when it tries\n * to connect to the LiveQuery server\n *\n * We expose three events to help you monitor the status of the LiveQueryClient.\n *\n * <pre>\n * let Parse = require('parse/node');\n * let LiveQueryClient = Parse.LiveQueryClient;\n * let client = new LiveQueryClient({\n *   applicationId: '',\n *   serverURL: '',\n *   javascriptKey: '',\n *   masterKey: ''\n *  });\n * </pre>\n *\n * Open - When we establish the WebSocket connection to the LiveQuery server, you'll get this event.\n * <pre>\n * client.on('open', () => {\n *\n * });</pre>\n *\n * Close - When we lose the WebSocket connection to the LiveQuery server, you'll get this event.\n * <pre>\n * client.on('close', () => {\n *\n * });</pre>\n *\n * Error - When some network error or LiveQuery server error happens, you'll get this event.\n * <pre>\n * client.on('error', (error) => {\n *\n * });</pre>\n * @alias Parse.LiveQueryClient\n */\n\n\nvar LiveQueryClient =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  (0, _inherits2.default)(LiveQueryClient, _EventEmitter);\n  /**\n   * @param {Object} options\n   * @param {string} options.applicationId - applicationId of your Parse app\n   * @param {string} options.serverURL - <b>the URL of your LiveQuery server</b>\n   * @param {string} options.javascriptKey (optional)\n   * @param {string} options.masterKey (optional) Your Parse Master Key. (Node.js only!)\n   * @param {string} options.sessionToken (optional)\n   * @param {string} options.installationId (optional)\n   */\n\n  function LiveQueryClient(_ref) {\n    var _this;\n\n    var applicationId = _ref.applicationId,\n        serverURL = _ref.serverURL,\n        javascriptKey = _ref.javascriptKey,\n        masterKey = _ref.masterKey,\n        sessionToken = _ref.sessionToken,\n        installationId = _ref.installationId;\n    (0, _classCallCheck2.default)(this, LiveQueryClient);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(LiveQueryClient).call(this));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"attempts\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"id\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"requestId\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"applicationId\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"serverURL\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"javascriptKey\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"masterKey\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"sessionToken\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"installationId\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"additionalProperties\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"connectPromise\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"subscriptions\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"socket\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"state\", void 0);\n\n    if (!serverURL || (0, _indexOf.default)(serverURL).call(serverURL, 'ws') !== 0) {\n      throw new Error('You need to set a proper Parse LiveQuery server url before using LiveQueryClient');\n    }\n\n    _this.reconnectHandle = null;\n    _this.attempts = 1;\n    _this.id = 0;\n    _this.requestId = 1;\n    _this.serverURL = serverURL;\n    _this.applicationId = applicationId;\n    _this.javascriptKey = javascriptKey;\n    _this.masterKey = masterKey;\n    _this.sessionToken = sessionToken;\n    _this.installationId = installationId;\n    _this.additionalProperties = true;\n    _this.connectPromise = (0, _promiseUtils.resolvingPromise)();\n    _this.subscriptions = new _map.default();\n    _this.state = CLIENT_STATE.INITIALIZED;\n    return _this;\n  }\n\n  (0, _createClass2.default)(LiveQueryClient, [{\n    key: \"shouldOpen\",\n    value: function ()\n    /*: any*/\n    {\n      return this.state === CLIENT_STATE.INITIALIZED || this.state === CLIENT_STATE.DISCONNECTED;\n    }\n    /**\n     * Subscribes to a ParseQuery\n     *\n     * If you provide the sessionToken, when the LiveQuery server gets ParseObject's\n     * updates from parse server, it'll try to check whether the sessionToken fulfills\n     * the ParseObject's ACL. The LiveQuery server will only send updates to clients whose\n     * sessionToken is fit for the ParseObject's ACL. You can check the LiveQuery protocol\n     * <a href=\"https://github.com/parse-community/parse-server/wiki/Parse-LiveQuery-Protocol-Specification\">here</a> for more details. The subscription you get is the same subscription you get\n     * from our Standard API.\n     *\n     * @param {Object} query - the ParseQuery you want to subscribe to\n     * @param {string} sessionToken (optional)\n     * @return {LiveQuerySubscription} subscription\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function (query\n    /*: Object*/\n    , sessionToken\n    /*: ?string*/\n    )\n    /*: LiveQuerySubscription*/\n    {\n      var _this2 = this;\n\n      if (!query) {\n        return;\n      }\n\n      var className = query.className;\n      var queryJSON = query.toJSON();\n      var where = queryJSON.where;\n      var fields = (0, _keys.default)(queryJSON) ? (0, _keys.default)(queryJSON).split(',') : undefined;\n      var subscribeRequest = {\n        op: OP_TYPES.SUBSCRIBE,\n        requestId: this.requestId,\n        query: {\n          className: className,\n          where: where,\n          fields: fields\n        }\n      };\n\n      if (sessionToken) {\n        subscribeRequest.sessionToken = sessionToken;\n      }\n\n      var subscription = new _LiveQuerySubscription.default(this.requestId, query, sessionToken);\n      this.subscriptions.set(this.requestId, subscription);\n      this.requestId += 1;\n      this.connectPromise.then(function () {\n        _this2.socket.send((0, _stringify.default)(subscribeRequest));\n      });\n      return subscription;\n    }\n    /**\n     * After calling unsubscribe you'll stop receiving events from the subscription object.\n     *\n     * @param {Object} subscription - subscription you would like to unsubscribe from.\n     */\n\n  }, {\n    key: \"unsubscribe\",\n    value: function (subscription\n    /*: Object*/\n    ) {\n      var _this3 = this;\n\n      if (!subscription) {\n        return;\n      }\n\n      this.subscriptions.delete(subscription.id);\n      var unsubscribeRequest = {\n        op: OP_TYPES.UNSUBSCRIBE,\n        requestId: subscription.id\n      };\n      this.connectPromise.then(function () {\n        _this3.socket.send((0, _stringify.default)(unsubscribeRequest));\n      });\n    }\n    /**\n     * After open is called, the LiveQueryClient will try to send a connect request\n     * to the LiveQuery server.\n     *\n     */\n\n  }, {\n    key: \"open\",\n    value: function () {\n      var _this4 = this;\n\n      var WebSocketImplementation = _CoreManager.default.getWebSocketController();\n\n      if (!WebSocketImplementation) {\n        this.emit(CLIENT_EMMITER_TYPES.ERROR, 'Can not find WebSocket implementation');\n        return;\n      }\n\n      if (this.state !== CLIENT_STATE.RECONNECTING) {\n        this.state = CLIENT_STATE.CONNECTING;\n      }\n\n      this.socket = new WebSocketImplementation(this.serverURL); // Bind WebSocket callbacks\n\n      this.socket.onopen = function () {\n        _this4._handleWebSocketOpen();\n      };\n\n      this.socket.onmessage = function (event) {\n        _this4._handleWebSocketMessage(event);\n      };\n\n      this.socket.onclose = function () {\n        _this4._handleWebSocketClose();\n      };\n\n      this.socket.onerror = function (error) {\n        _this4._handleWebSocketError(error);\n      };\n    }\n  }, {\n    key: \"resubscribe\",\n    value: function () {\n      var _context,\n          _this5 = this;\n\n      (0, _forEach.default)(_context = this.subscriptions).call(_context, function (subscription, requestId) {\n        var query = subscription.query;\n        var queryJSON = query.toJSON();\n        var where = queryJSON.where;\n        var fields = (0, _keys.default)(queryJSON) ? (0, _keys.default)(queryJSON).split(',') : undefined;\n        var className = query.className;\n        var sessionToken = subscription.sessionToken;\n        var subscribeRequest = {\n          op: OP_TYPES.SUBSCRIBE,\n          requestId: requestId,\n          query: {\n            className: className,\n            where: where,\n            fields: fields\n          }\n        };\n\n        if (sessionToken) {\n          subscribeRequest.sessionToken = sessionToken;\n        }\n\n        _this5.connectPromise.then(function () {\n          _this5.socket.send((0, _stringify.default)(subscribeRequest));\n        });\n      });\n    }\n    /**\n     * This method will close the WebSocket connection to this LiveQueryClient,\n     * cancel the auto reconnect and unsubscribe all subscriptions based on it.\n     *\n     */\n\n  }, {\n    key: \"close\",\n    value: function () {\n      if (this.state === CLIENT_STATE.INITIALIZED || this.state === CLIENT_STATE.DISCONNECTED) {\n        return;\n      }\n\n      this.state = CLIENT_STATE.DISCONNECTED;\n      this.socket.close(); // Notify each subscription about the close\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = (0, _getIterator2.default)((0, _values.default)(_context2 = this.subscriptions).call(_context2)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _context2;\n\n          var subscription = _step.value;\n          subscription.subscribed = false;\n          subscription.emit(SUBSCRIPTION_EMMITER_TYPES.CLOSE);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this._handleReset();\n\n      this.emit(CLIENT_EMMITER_TYPES.CLOSE);\n    } // ensure we start with valid state if connect is called again after close\n\n  }, {\n    key: \"_handleReset\",\n    value: function () {\n      this.attempts = 1;\n      this.id = 0;\n      this.requestId = 1;\n      this.connectPromise = (0, _promiseUtils.resolvingPromise)();\n      this.subscriptions = new _map.default();\n    }\n  }, {\n    key: \"_handleWebSocketOpen\",\n    value: function () {\n      this.attempts = 1;\n      var connectRequest = {\n        op: OP_TYPES.CONNECT,\n        applicationId: this.applicationId,\n        javascriptKey: this.javascriptKey,\n        masterKey: this.masterKey,\n        sessionToken: this.sessionToken\n      };\n\n      if (this.additionalProperties) {\n        connectRequest.installationId = this.installationId;\n      }\n\n      this.socket.send((0, _stringify.default)(connectRequest));\n    }\n  }, {\n    key: \"_handleWebSocketMessage\",\n    value: function (event\n    /*: any*/\n    ) {\n      var data = event.data;\n\n      if (typeof data === 'string') {\n        data = JSON.parse(data);\n      }\n\n      var subscription = null;\n\n      if (data.requestId) {\n        subscription = this.subscriptions.get(data.requestId);\n      }\n\n      var response = {\n        clientId: data.clientId,\n        installationId: data.installationId\n      };\n\n      switch (data.op) {\n        case OP_EVENTS.CONNECTED:\n          if (this.state === CLIENT_STATE.RECONNECTING) {\n            this.resubscribe();\n          }\n\n          this.emit(CLIENT_EMMITER_TYPES.OPEN);\n          this.id = data.clientId;\n          this.connectPromise.resolve();\n          this.state = CLIENT_STATE.CONNECTED;\n          break;\n\n        case OP_EVENTS.SUBSCRIBED:\n          if (subscription) {\n            subscription.subscribed = true;\n            subscription.subscribePromise.resolve();\n            subscription.emit(SUBSCRIPTION_EMMITER_TYPES.OPEN, response);\n          }\n\n          break;\n\n        case OP_EVENTS.ERROR:\n          if (data.requestId) {\n            if (subscription) {\n              subscription.subscribePromise.resolve();\n              subscription.emit(SUBSCRIPTION_EMMITER_TYPES.ERROR, data.error);\n            }\n          } else {\n            this.emit(CLIENT_EMMITER_TYPES.ERROR, data.error);\n          }\n\n          if (data.error === 'Additional properties not allowed') {\n            this.additionalProperties = false;\n          }\n\n          if (data.reconnect) {\n            this._handleReconnect();\n          }\n\n          break;\n\n        case OP_EVENTS.UNSUBSCRIBED:\n          // We have already deleted subscription in unsubscribe(), do nothing here\n          break;\n\n        default:\n          {\n            // create, update, enter, leave, delete cases\n            if (!subscription) {\n              break;\n            }\n\n            var override = false;\n\n            if (data.original) {\n              override = true;\n              delete data.original.__type; // Check for removed fields\n\n              for (var field in data.original) {\n                if (!(field in data.object)) {\n                  data.object[field] = undefined;\n                }\n              }\n\n              data.original = _ParseObject.default.fromJSON(data.original, false);\n            }\n\n            delete data.object.__type;\n\n            var parseObject = _ParseObject.default.fromJSON(data.object, override);\n\n            if (data.original) {\n              subscription.emit(data.op, parseObject, data.original, response);\n            } else {\n              subscription.emit(data.op, parseObject, response);\n            }\n\n            var localDatastore = _CoreManager.default.getLocalDatastore();\n\n            if (override && localDatastore.isEnabled) {\n              localDatastore._updateObjectIfPinned(parseObject).then(function () {});\n            }\n          }\n      }\n    }\n  }, {\n    key: \"_handleWebSocketClose\",\n    value: function () {\n      if (this.state === CLIENT_STATE.DISCONNECTED) {\n        return;\n      }\n\n      this.state = CLIENT_STATE.CLOSED;\n      this.emit(CLIENT_EMMITER_TYPES.CLOSE); // Notify each subscription about the close\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = (0, _getIterator2.default)((0, _values.default)(_context3 = this.subscriptions).call(_context3)), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _context3;\n\n          var subscription = _step2.value;\n          subscription.emit(SUBSCRIPTION_EMMITER_TYPES.CLOSE);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      this._handleReconnect();\n    }\n  }, {\n    key: \"_handleWebSocketError\",\n    value: function (error\n    /*: any*/\n    ) {\n      this.emit(CLIENT_EMMITER_TYPES.ERROR, error);\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = (0, _getIterator2.default)((0, _values.default)(_context4 = this.subscriptions).call(_context4)), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _context4;\n\n          var subscription = _step3.value;\n          subscription.emit(SUBSCRIPTION_EMMITER_TYPES.ERROR);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      this._handleReconnect();\n    }\n  }, {\n    key: \"_handleReconnect\",\n    value: function () {\n      var _context5,\n          _this6 = this; // if closed or currently reconnecting we stop attempting to reconnect\n\n\n      if (this.state === CLIENT_STATE.DISCONNECTED) {\n        return;\n      }\n\n      this.state = CLIENT_STATE.RECONNECTING;\n      var time = generateInterval(this.attempts); // handle case when both close/error occur at frequent rates we ensure we do not reconnect unnecessarily.\n      // we're unable to distinguish different between close/error when we're unable to reconnect therefore\n      // we try to reconnect in both cases\n      // server side ws and browser WebSocket behave differently in when close/error get triggered\n\n      if (this.reconnectHandle) {\n        clearTimeout(this.reconnectHandle);\n      }\n\n      this.reconnectHandle = (0, _setTimeout2.default)((0, _bind.default)(_context5 = function () {\n        _this6.attempts++;\n        _this6.connectPromise = (0, _promiseUtils.resolvingPromise)();\n\n        _this6.open();\n      }).call(_context5, this), time);\n    }\n  }]);\n  return LiveQueryClient;\n}(_EventEmitter2.default);\n\n_CoreManager.default.setWebSocketController(typeof WebSocket === 'function' || (typeof WebSocket === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(WebSocket)) === 'object' ? WebSocket : null);\n\nvar _default = LiveQueryClient;\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.run = run;\nexports.getJobsData = getJobsData;\nexports.startJob = startJob;\nexports.getJobStatus = getJobStatus;\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n\nvar _decode = _interopRequireDefault(require(\"./decode\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n/**\n * Contains functions for calling and declaring\n * <a href=\"/docs/cloud_code_guide#functions\">cloud functions</a>.\n * <p><strong><em>\n *   Some functions are only available from Cloud Code.\n * </em></strong></p>\n *\n * @class Parse.Cloud\n * @static\n * @hideconstructor\n */\n\n/**\n  * Makes a call to a cloud function.\n  * @method run\n  * @name Parse.Cloud.run\n  * @param {String} name The function name.\n  * @param {Object} data The parameters to send to the cloud function.\n  * @param {Object} options\n  * @return {Promise} A promise that will be resolved with the result\n  * of the function.\n  */\n\n\nfunction run(name\n/*: string*/\n, data\n/*: mixed*/\n, options\n/*: RequestOptions*/\n)\n/*: Promise<mixed>*/\n{\n  options = options || {};\n\n  if (typeof name !== 'string' || name.length === 0) {\n    throw new TypeError('Cloud function name must be a string.');\n  }\n\n  var requestOptions = {};\n\n  if (options.useMasterKey) {\n    requestOptions.useMasterKey = options.useMasterKey;\n  }\n\n  if (options.sessionToken) {\n    requestOptions.sessionToken = options.sessionToken;\n  }\n\n  return _CoreManager.default.getCloudController().run(name, data, requestOptions);\n}\n/**\n  * Gets data for the current set of cloud jobs.\n  * @method getJobsData\n  * @name Parse.Cloud.getJobsData\n  * @return {Promise} A promise that will be resolved with the result\n  * of the function.\n  */\n\n\nfunction getJobsData()\n/*: Promise<Object>*/\n{\n  return _CoreManager.default.getCloudController().getJobsData({\n    useMasterKey: true\n  });\n}\n/**\n  * Starts a given cloud job, which will process asynchronously.\n  * @method startJob\n  * @name Parse.Cloud.startJob\n  * @param {String} name The function name.\n  * @param {Object} data The parameters to send to the cloud function.\n  * @return {Promise} A promise that will be resolved with the jobStatusId\n  * of the job.\n  */\n\n\nfunction startJob(name\n/*: string*/\n, data\n/*: mixed*/\n)\n/*: Promise<string>*/\n{\n  if (typeof name !== 'string' || name.length === 0) {\n    throw new TypeError('Cloud job name must be a string.');\n  }\n\n  return _CoreManager.default.getCloudController().startJob(name, data, {\n    useMasterKey: true\n  });\n}\n/**\n  * Gets job status by Id\n  * @method getJobStatus\n  * @name Parse.Cloud.getJobStatus\n  * @param {String} jobStatusId The Id of Job Status.\n  * @return {Parse.Object} Status of Job.\n  */\n\n\nfunction getJobStatus(jobStatusId\n/*: string*/\n)\n/*: Promise<ParseObject>*/\n{\n  var query = new _ParseQuery.default('_JobStatus');\n  return query.get(jobStatusId, {\n    useMasterKey: true\n  });\n}\n\nvar DefaultController = {\n  run: function (name, data, options\n  /*: RequestOptions*/\n  ) {\n    var RESTController = _CoreManager.default.getRESTController();\n\n    var payload = (0, _encode.default)(data, true);\n    var request = RESTController.request('POST', 'functions/' + name, payload, options);\n    return request.then(function (res) {\n      if ((0, _typeof2.default)(res) === 'object' && (0, _keys.default)(res).length > 0 && !res.hasOwnProperty('result')) {\n        throw new _ParseError.default(_ParseError.default.INVALID_JSON, 'The server returned an invalid response.');\n      }\n\n      var decoded = (0, _decode.default)(res);\n\n      if (decoded && decoded.hasOwnProperty('result')) {\n        return _promise.default.resolve(decoded.result);\n      }\n\n      return _promise.default.resolve(undefined);\n    });\n  },\n  getJobsData: function (options\n  /*: RequestOptions*/\n  ) {\n    var RESTController = _CoreManager.default.getRESTController();\n\n    return RESTController.request('GET', 'cloud_code/jobs/data', null, options);\n  },\n  startJob: function (name, data, options\n  /*: RequestOptions*/\n  ) {\n    var RESTController = _CoreManager.default.getRESTController();\n\n    var payload = (0, _encode.default)(data, true);\n    return RESTController.request('POST', 'jobs/' + name, payload, options);\n  }\n};\n\n_CoreManager.default.setCloudController(DefaultController);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\n\nvar _from = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/from\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\n\nvar _keys2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/keys\"));\n\nvar _startsWith = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/starts-with\"));\n\nvar _keys3 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\n\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\n\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _getIterator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js/get-iterator\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _set = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/set\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/toConsumableArray\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/slicedToArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n/**\n * Provides a local datastore which can be used to store and retrieve <code>Parse.Object</code>. <br />\n * To enable this functionality, call <code>Parse.enableLocalDatastore()</code>.\n *\n * Pin object to add to local datastore\n *\n * <pre>await object.pin();</pre>\n * <pre>await object.pinWithName('pinName');</pre>\n *\n * Query pinned objects\n *\n * <pre>query.fromLocalDatastore();</pre>\n * <pre>query.fromPin();</pre>\n * <pre>query.fromPinWithName();</pre>\n *\n * <pre>const localObjects = await query.find();</pre>\n *\n * @class Parse.LocalDatastore\n * @static\n */\n\n\nvar LocalDatastore = {\n  isEnabled: false,\n  isSyncing: false,\n  fromPinWithName: function (name\n  /*: string*/\n  )\n  /*: Promise<Array<Object>>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.fromPinWithName(name);\n  },\n  pinWithName: function (name\n  /*: string*/\n  , value\n  /*: any*/\n  )\n  /*: Promise<void>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.pinWithName(name, value);\n  },\n  unPinWithName: function (name\n  /*: string*/\n  )\n  /*: Promise<void>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.unPinWithName(name);\n  },\n  _getAllContents: function ()\n  /*: Promise<Object>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.getAllContents();\n  },\n  // Use for testing\n  _getRawStorage: function ()\n  /*: Promise<Object>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.getRawStorage();\n  },\n  _clear: function ()\n  /*: Promise<void>*/\n  {\n    var controller = _CoreManager.default.getLocalDatastoreController();\n\n    return controller.clear();\n  },\n  // Pin the object and children recursively\n  // Saves the object and children key to Pin Name\n  _handlePinAllWithName: function () {\n    var _handlePinAllWithName2 = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee(name\n    /*: string*/\n    , objects\n    /*: Array<ParseObject>*/\n    ) {\n      var _context;\n\n      var pinName, toPinPromises, objectKeys, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, parent, children, parentKey, json, objectKey, fromPinPromise, _ref, _ref2, pinned, toPin;\n\n      return _regenerator.default.wrap(function (_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              pinName = this.getPinName(name);\n              toPinPromises = [];\n              objectKeys = [];\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _iteratorError = undefined;\n              _context2.prev = 6;\n\n              for (_iterator = (0, _getIterator2.default)(objects); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                parent = _step.value;\n                children = this._getChildren(parent);\n                parentKey = this.getKeyForObject(parent);\n                json = parent._toFullJSON();\n\n                if (parent._localId) {\n                  json._localId = parent._localId;\n                }\n\n                children[parentKey] = json;\n\n                for (objectKey in children) {\n                  objectKeys.push(objectKey);\n                  toPinPromises.push(this.pinWithName(objectKey, [children[objectKey]]));\n                }\n              }\n\n              _context2.next = 14;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](6);\n              _didIteratorError = true;\n              _iteratorError = _context2.t0;\n\n            case 14:\n              _context2.prev = 14;\n              _context2.prev = 15;\n\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n\n            case 17:\n              _context2.prev = 17;\n\n              if (!_didIteratorError) {\n                _context2.next = 20;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 20:\n              return _context2.finish(17);\n\n            case 21:\n              return _context2.finish(14);\n\n            case 22:\n              fromPinPromise = this.fromPinWithName(pinName);\n              _context2.next = 25;\n              return _promise.default.all([fromPinPromise, toPinPromises]);\n\n            case 25:\n              _ref = _context2.sent;\n              _ref2 = (0, _slicedToArray2.default)(_ref, 1);\n              pinned = _ref2[0];\n              toPin = (0, _toConsumableArray2.default)(new _set.default((0, _concat.default)(_context = []).call(_context, (0, _toConsumableArray2.default)(pinned || []), objectKeys)));\n              return _context2.abrupt(\"return\", this.pinWithName(pinName, toPin));\n\n            case 30:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee, this, [[6, 10, 14, 22], [15,, 17, 21]]);\n    }));\n\n    return function () {\n      return _handlePinAllWithName2.apply(this, arguments);\n    };\n  }(),\n  // Removes object and children keys from pin name\n  // Keeps the object and children pinned\n  _handleUnPinAllWithName: function () {\n    var _handleUnPinAllWithName2 = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee2(name\n    /*: string*/\n    , objects\n    /*: Array<ParseObject>*/\n    ) {\n      var localDatastore, pinName, promises, objectKeys, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _objectKeys, _context3, parent, children, parentKey, pinned, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, objectKey, hasReference, key, pinnedObjects;\n\n      return _regenerator.default.wrap(function (_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return this._getAllContents();\n\n            case 2:\n              localDatastore = _context4.sent;\n              pinName = this.getPinName(name);\n              promises = [];\n              objectKeys = [];\n              _iteratorNormalCompletion2 = true;\n              _didIteratorError2 = false;\n              _iteratorError2 = undefined;\n              _context4.prev = 9;\n\n              for (_iterator2 = (0, _getIterator2.default)(objects); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                parent = _step2.value;\n                children = this._getChildren(parent);\n                parentKey = this.getKeyForObject(parent);\n\n                (_objectKeys = objectKeys).push.apply(_objectKeys, (0, _concat.default)(_context3 = [parentKey]).call(_context3, (0, _toConsumableArray2.default)((0, _keys3.default)(children))));\n              }\n\n              _context4.next = 17;\n              break;\n\n            case 13:\n              _context4.prev = 13;\n              _context4.t0 = _context4[\"catch\"](9);\n              _didIteratorError2 = true;\n              _iteratorError2 = _context4.t0;\n\n            case 17:\n              _context4.prev = 17;\n              _context4.prev = 18;\n\n              if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                _iterator2.return();\n              }\n\n            case 20:\n              _context4.prev = 20;\n\n              if (!_didIteratorError2) {\n                _context4.next = 23;\n                break;\n              }\n\n              throw _iteratorError2;\n\n            case 23:\n              return _context4.finish(20);\n\n            case 24:\n              return _context4.finish(17);\n\n            case 25:\n              objectKeys = (0, _toConsumableArray2.default)(new _set.default(objectKeys));\n              pinned = localDatastore[pinName] || [];\n              pinned = (0, _filter.default)(pinned).call(pinned, function (item) {\n                return !(0, _includes.default)(objectKeys).call(objectKeys, item);\n              });\n\n              if (pinned.length == 0) {\n                promises.push(this.unPinWithName(pinName));\n                delete localDatastore[pinName];\n              } else {\n                promises.push(this.pinWithName(pinName, pinned));\n                localDatastore[pinName] = pinned;\n              }\n\n              _iteratorNormalCompletion3 = true;\n              _didIteratorError3 = false;\n              _iteratorError3 = undefined;\n              _context4.prev = 32;\n              _iterator3 = (0, _getIterator2.default)(objectKeys);\n\n            case 34:\n              if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n                _context4.next = 51;\n                break;\n              }\n\n              objectKey = _step3.value;\n              hasReference = false;\n              _context4.t1 = (0, _keys2.default)(_regenerator.default).call(_regenerator.default, localDatastore);\n\n            case 38:\n              if ((_context4.t2 = _context4.t1()).done) {\n                _context4.next = 47;\n                break;\n              }\n\n              key = _context4.t2.value;\n\n              if (!(key === _LocalDatastoreUtils.DEFAULT_PIN || (0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.PIN_PREFIX))) {\n                _context4.next = 45;\n                break;\n              }\n\n              pinnedObjects = localDatastore[key] || [];\n\n              if (!(0, _includes.default)(pinnedObjects).call(pinnedObjects, objectKey)) {\n                _context4.next = 45;\n                break;\n              }\n\n              hasReference = true;\n              return _context4.abrupt(\"break\", 47);\n\n            case 45:\n              _context4.next = 38;\n              break;\n\n            case 47:\n              if (!hasReference) {\n                promises.push(this.unPinWithName(objectKey));\n              }\n\n            case 48:\n              _iteratorNormalCompletion3 = true;\n              _context4.next = 34;\n              break;\n\n            case 51:\n              _context4.next = 57;\n              break;\n\n            case 53:\n              _context4.prev = 53;\n              _context4.t3 = _context4[\"catch\"](32);\n              _didIteratorError3 = true;\n              _iteratorError3 = _context4.t3;\n\n            case 57:\n              _context4.prev = 57;\n              _context4.prev = 58;\n\n              if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n                _iterator3.return();\n              }\n\n            case 60:\n              _context4.prev = 60;\n\n              if (!_didIteratorError3) {\n                _context4.next = 63;\n                break;\n              }\n\n              throw _iteratorError3;\n\n            case 63:\n              return _context4.finish(60);\n\n            case 64:\n              return _context4.finish(57);\n\n            case 65:\n              return _context4.abrupt(\"return\", _promise.default.all(promises));\n\n            case 66:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee2, this, [[9, 13, 17, 25], [18,, 20, 24], [32, 53, 57, 65], [58,, 60, 64]]);\n    }));\n\n    return function () {\n      return _handleUnPinAllWithName2.apply(this, arguments);\n    };\n  }(),\n  // Retrieve all pointer fields from object recursively\n  _getChildren: function (object\n  /*: ParseObject*/\n  ) {\n    var encountered = {};\n\n    var json = object._toFullJSON();\n\n    for (var key in json) {\n      if (json[key] && json[key].__type && json[key].__type === 'Object') {\n        this._traverse(json[key], encountered);\n      }\n    }\n\n    return encountered;\n  },\n  _traverse: function (object\n  /*: any*/\n  , encountered\n  /*: any*/\n  ) {\n    if (!object.objectId) {\n      return;\n    } else {\n      var objectKey = this.getKeyForObject(object);\n\n      if (encountered[objectKey]) {\n        return;\n      }\n\n      encountered[objectKey] = object;\n    }\n\n    for (var key in object) {\n      var json = object[key];\n\n      if (!object[key]) {\n        json = object;\n      }\n\n      if (json.__type && json.__type === 'Object') {\n        this._traverse(json, encountered);\n      }\n    }\n  },\n  // Transform keys in pin name to objects\n  _serializeObjectsFromPinName: function () {\n    var _serializeObjectsFromPinName2 = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee3(name\n    /*: string*/\n    ) {\n      var _this = this,\n          _context5,\n          _concatInstanceProper,\n          _context6;\n\n      var localDatastore, allObjects, key, pinName, pinned, promises, objects;\n      return _regenerator.default.wrap(function (_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return this._getAllContents();\n\n            case 2:\n              localDatastore = _context7.sent;\n              allObjects = [];\n\n              for (key in localDatastore) {\n                if ((0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.OBJECT_PREFIX)) {\n                  allObjects.push(localDatastore[key][0]);\n                }\n              }\n\n              if (name) {\n                _context7.next = 7;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", allObjects);\n\n            case 7:\n              pinName = this.getPinName(name);\n              pinned = localDatastore[pinName];\n\n              if ((0, _isArray.default)(pinned)) {\n                _context7.next = 11;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", []);\n\n            case 11:\n              promises = (0, _map.default)(pinned).call(pinned, function (objectKey) {\n                return _this.fromPinWithName(objectKey);\n              });\n              _context7.next = 14;\n              return _promise.default.all(promises);\n\n            case 14:\n              objects = _context7.sent;\n              objects = (_concatInstanceProper = (0, _concat.default)(_context5 = [])).call.apply(_concatInstanceProper, (0, _concat.default)(_context6 = [_context5]).call(_context6, (0, _toConsumableArray2.default)(objects)));\n              return _context7.abrupt(\"return\", (0, _filter.default)(objects).call(objects, function (object) {\n                return object != null;\n              }));\n\n            case 17:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    return function () {\n      return _serializeObjectsFromPinName2.apply(this, arguments);\n    };\n  }(),\n  // Replaces object pointers with pinned pointers\n  // The object pointers may contain old data\n  // Uses Breadth First Search Algorithm\n  _serializeObject: function () {\n    var _serializeObject2 = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee4(objectKey\n    /*: string*/\n    , localDatastore\n    /*: any*/\n    ) {\n      var LDS, root, queue, meta, uniqueId, nodeId, subTreeRoot, field, value, key, pointer;\n      return _regenerator.default.wrap(function (_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              LDS = localDatastore;\n\n              if (LDS) {\n                _context8.next = 5;\n                break;\n              }\n\n              _context8.next = 4;\n              return this._getAllContents();\n\n            case 4:\n              LDS = _context8.sent;\n\n            case 5:\n              if (!(!LDS[objectKey] || LDS[objectKey].length === 0)) {\n                _context8.next = 7;\n                break;\n              }\n\n              return _context8.abrupt(\"return\", null);\n\n            case 7:\n              root = LDS[objectKey][0];\n              queue = [];\n              meta = {};\n              uniqueId = 0;\n              meta[uniqueId] = root;\n              queue.push(uniqueId);\n\n              while (queue.length !== 0) {\n                nodeId = queue.shift();\n                subTreeRoot = meta[nodeId];\n\n                for (field in subTreeRoot) {\n                  value = subTreeRoot[field];\n\n                  if (value.__type && value.__type === 'Object') {\n                    key = this.getKeyForObject(value);\n\n                    if (LDS[key] && LDS[key].length > 0) {\n                      pointer = LDS[key][0];\n                      uniqueId++;\n                      meta[uniqueId] = pointer;\n                      subTreeRoot[field] = pointer;\n                      queue.push(uniqueId);\n                    }\n                  }\n                }\n              }\n\n              return _context8.abrupt(\"return\", root);\n\n            case 15:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n\n    return function () {\n      return _serializeObject2.apply(this, arguments);\n    };\n  }(),\n  // Called when an object is save / fetched\n  // Update object pin value\n  _updateObjectIfPinned: function () {\n    var _updateObjectIfPinned2 = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee5(object\n    /*: ParseObject*/\n    ) {\n      var objectKey, pinned;\n      return _regenerator.default.wrap(function (_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              if (this.isEnabled) {\n                _context9.next = 2;\n                break;\n              }\n\n              return _context9.abrupt(\"return\");\n\n            case 2:\n              objectKey = this.getKeyForObject(object);\n              _context9.next = 5;\n              return this.fromPinWithName(objectKey);\n\n            case 5:\n              pinned = _context9.sent;\n\n              if (!(!pinned || pinned.length === 0)) {\n                _context9.next = 8;\n                break;\n              }\n\n              return _context9.abrupt(\"return\");\n\n            case 8:\n              return _context9.abrupt(\"return\", this.pinWithName(objectKey, [object._toFullJSON()]));\n\n            case 9:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee5, this);\n    }));\n\n    return function () {\n      return _updateObjectIfPinned2.apply(this, arguments);\n    };\n  }(),\n  // Called when object is destroyed\n  // Unpin object and remove all references from pin names\n  // TODO: Destroy children?\n  _destroyObjectIfPinned: function () {\n    var _destroyObjectIfPinned2 = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee6(object\n    /*: ParseObject*/\n    ) {\n      var localDatastore, objectKey, pin, promises, key, pinned;\n      return _regenerator.default.wrap(function (_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              if (this.isEnabled) {\n                _context10.next = 2;\n                break;\n              }\n\n              return _context10.abrupt(\"return\");\n\n            case 2:\n              _context10.next = 4;\n              return this._getAllContents();\n\n            case 4:\n              localDatastore = _context10.sent;\n              objectKey = this.getKeyForObject(object);\n              pin = localDatastore[objectKey];\n\n              if (pin) {\n                _context10.next = 9;\n                break;\n              }\n\n              return _context10.abrupt(\"return\");\n\n            case 9:\n              promises = [this.unPinWithName(objectKey)];\n              delete localDatastore[objectKey];\n\n              for (key in localDatastore) {\n                if (key === _LocalDatastoreUtils.DEFAULT_PIN || (0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.PIN_PREFIX)) {\n                  pinned = localDatastore[key] || [];\n\n                  if ((0, _includes.default)(pinned).call(pinned, objectKey)) {\n                    pinned = (0, _filter.default)(pinned).call(pinned, function (item) {\n                      return item !== objectKey;\n                    });\n\n                    if (pinned.length == 0) {\n                      promises.push(this.unPinWithName(key));\n                      delete localDatastore[key];\n                    } else {\n                      promises.push(this.pinWithName(key, pinned));\n                      localDatastore[key] = pinned;\n                    }\n                  }\n                }\n              }\n\n              return _context10.abrupt(\"return\", _promise.default.all(promises));\n\n            case 13:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee6, this);\n    }));\n\n    return function () {\n      return _destroyObjectIfPinned2.apply(this, arguments);\n    };\n  }(),\n  // Update pin and references of the unsaved object\n  _updateLocalIdForObject: function () {\n    var _updateLocalIdForObject2 = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee7(localId\n    /*: string*/\n    , object\n    /*: ParseObject*/\n    ) {\n      var _context11, _context12;\n\n      var localKey, objectKey, unsaved, promises, localDatastore, key, pinned;\n      return _regenerator.default.wrap(function (_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              if (this.isEnabled) {\n                _context13.next = 2;\n                break;\n              }\n\n              return _context13.abrupt(\"return\");\n\n            case 2:\n              localKey = (0, _concat.default)(_context11 = (0, _concat.default)(_context12 = \"\".concat(_LocalDatastoreUtils.OBJECT_PREFIX)).call(_context12, object.className, \"_\")).call(_context11, localId);\n              objectKey = this.getKeyForObject(object);\n              _context13.next = 6;\n              return this.fromPinWithName(localKey);\n\n            case 6:\n              unsaved = _context13.sent;\n\n              if (!(!unsaved || unsaved.length === 0)) {\n                _context13.next = 9;\n                break;\n              }\n\n              return _context13.abrupt(\"return\");\n\n            case 9:\n              promises = [this.unPinWithName(localKey), this.pinWithName(objectKey, unsaved)];\n              _context13.next = 12;\n              return this._getAllContents();\n\n            case 12:\n              localDatastore = _context13.sent;\n\n              for (key in localDatastore) {\n                if (key === _LocalDatastoreUtils.DEFAULT_PIN || (0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.PIN_PREFIX)) {\n                  pinned = localDatastore[key] || [];\n\n                  if ((0, _includes.default)(pinned).call(pinned, localKey)) {\n                    pinned = (0, _filter.default)(pinned).call(pinned, function (item) {\n                      return item !== localKey;\n                    });\n                    pinned.push(objectKey);\n                    promises.push(this.pinWithName(key, pinned));\n                    localDatastore[key] = pinned;\n                  }\n                }\n              }\n\n              return _context13.abrupt(\"return\", _promise.default.all(promises));\n\n            case 15:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee7, this);\n    }));\n\n    return function () {\n      return _updateLocalIdForObject2.apply(this, arguments);\n    };\n  }(),\n\n  /**\n   * Updates Local Datastore from Server\n   *\n   * <pre>\n   * await Parse.LocalDatastore.updateFromServer();\n   * </pre>\n   * @method updateFromServer\n   * @name Parse.LocalDatastore.updateFromServer\n   * @static\n   */\n  updateFromServer: function () {\n    var _updateFromServer = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee8() {\n      var _context14,\n          _this2 = this;\n\n      var localDatastore, keys, key, pointersHash, _i, _keys, _key, _key$split, _key$split2, className, objectId, queryPromises, responses, objects, pinPromises;\n\n      return _regenerator.default.wrap(function (_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n              if (!(!this.checkIfEnabled() || this.isSyncing)) {\n                _context15.next = 2;\n                break;\n              }\n\n              return _context15.abrupt(\"return\");\n\n            case 2:\n              _context15.next = 4;\n              return this._getAllContents();\n\n            case 4:\n              localDatastore = _context15.sent;\n              keys = [];\n\n              for (key in localDatastore) {\n                if ((0, _startsWith.default)(key).call(key, _LocalDatastoreUtils.OBJECT_PREFIX)) {\n                  keys.push(key);\n                }\n              }\n\n              if (!(keys.length === 0)) {\n                _context15.next = 9;\n                break;\n              }\n\n              return _context15.abrupt(\"return\");\n\n            case 9:\n              this.isSyncing = true;\n              pointersHash = {};\n              _i = 0, _keys = keys;\n\n            case 12:\n              if (!(_i < _keys.length)) {\n                _context15.next = 23;\n                break;\n              }\n\n              _key = _keys[_i]; // Ignore the OBJECT_PREFIX\n\n              _key$split = _key.split('_'), _key$split2 = (0, _slicedToArray2.default)(_key$split, 4), className = _key$split2[2], objectId = _key$split2[3]; // User key is split into [ 'Parse', 'LDS', '', 'User', 'objectId' ]\n\n              if (_key.split('_').length === 5 && _key.split('_')[3] === 'User') {\n                className = '_User';\n                objectId = _key.split('_')[4];\n              }\n\n              if (!(0, _startsWith.default)(objectId).call(objectId, 'local')) {\n                _context15.next = 18;\n                break;\n              }\n\n              return _context15.abrupt(\"continue\", 20);\n\n            case 18:\n              if (!(className in pointersHash)) {\n                pointersHash[className] = new _set.default();\n              }\n\n              pointersHash[className].add(objectId);\n\n            case 20:\n              _i++;\n              _context15.next = 12;\n              break;\n\n            case 23:\n              queryPromises = (0, _map.default)(_context14 = (0, _keys3.default)(pointersHash)).call(_context14, function (className) {\n                var objectIds = (0, _from.default)(pointersHash[className]);\n                var query = new _ParseQuery.default(className);\n                query.limit(objectIds.length);\n\n                if (objectIds.length === 1) {\n                  query.equalTo('objectId', objectIds[0]);\n                } else {\n                  query.containedIn('objectId', objectIds);\n                }\n\n                return (0, _find.default)(query).call(query);\n              });\n              _context15.prev = 24;\n              _context15.next = 27;\n              return _promise.default.all(queryPromises);\n\n            case 27:\n              responses = _context15.sent;\n              objects = (0, _concat.default)([]).apply([], responses);\n              pinPromises = (0, _map.default)(objects).call(objects, function (object) {\n                var objectKey = _this2.getKeyForObject(object);\n\n                return _this2.pinWithName(objectKey, object._toFullJSON());\n              });\n              _context15.next = 32;\n              return _promise.default.all(pinPromises);\n\n            case 32:\n              this.isSyncing = false;\n              _context15.next = 39;\n              break;\n\n            case 35:\n              _context15.prev = 35;\n              _context15.t0 = _context15[\"catch\"](24);\n              console.error('Error syncing LocalDatastore: ', _context15.t0);\n              this.isSyncing = false;\n\n            case 39:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, _callee8, this, [[24, 35]]);\n    }));\n\n    return function () {\n      return _updateFromServer.apply(this, arguments);\n    };\n  }(),\n  getKeyForObject: function (object\n  /*: any*/\n  ) {\n    var _context16, _context17;\n\n    var objectId = object.objectId || object._getId();\n\n    return (0, _concat.default)(_context16 = (0, _concat.default)(_context17 = \"\".concat(_LocalDatastoreUtils.OBJECT_PREFIX)).call(_context17, object.className, \"_\")).call(_context16, objectId);\n  },\n  getPinName: function (pinName\n  /*: ?string*/\n  ) {\n    if (!pinName || pinName === _LocalDatastoreUtils.DEFAULT_PIN) {\n      return _LocalDatastoreUtils.DEFAULT_PIN;\n    }\n\n    return _LocalDatastoreUtils.PIN_PREFIX + pinName;\n  },\n  checkIfEnabled: function () {\n    if (!this.isEnabled) {\n      console.error('Parse.enableLocalDatastore() must be called first');\n    }\n\n    return this.isEnabled;\n  }\n};\nmodule.exports = LocalDatastore;\n\n_CoreManager.default.setLocalDatastoreController(require('./LocalDatastoreController'));\n\n_CoreManager.default.setLocalDatastore(LocalDatastore);","module.exports = require('./lib/browser/Parse.js');\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _getIterator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js/get-iterator\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _reduce = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\n\nvar _Storage = _interopRequireDefault(require(\"./Storage\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n\nvar LocalDatastoreController = {\n  fromPinWithName: function () {\n    var _fromPinWithName = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee(name\n    /*: string*/\n    ) {\n      var values, objects;\n      return _regenerator.default.wrap(function (_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _Storage.default.getItemAsync(name);\n\n            case 2:\n              values = _context.sent;\n\n              if (values) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\", []);\n\n            case 5:\n              objects = JSON.parse(values);\n              return _context.abrupt(\"return\", objects);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function () {\n      return _fromPinWithName.apply(this, arguments);\n    };\n  }(),\n  pinWithName: function (name\n  /*: string*/\n  , value\n  /*: any*/\n  ) {\n    var values = (0, _stringify.default)(value);\n    return _Storage.default.setItemAsync(name, values);\n  },\n  unPinWithName: function (name\n  /*: string*/\n  ) {\n    return _Storage.default.removeItemAsync(name);\n  },\n  getAllContents: function () {\n    var _getAllContents = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee3() {\n      var keys;\n      return _regenerator.default.wrap(function (_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _Storage.default.getAllKeysAsync();\n\n            case 2:\n              keys = _context3.sent;\n              return _context3.abrupt(\"return\", (0, _reduce.default)(keys).call(keys,\n              /*#__PURE__*/\n              function () {\n                var _ref = (0, _asyncToGenerator2.default)(\n                /*#__PURE__*/\n                _regenerator.default.mark(function _callee2(previousPromise, key) {\n                  var LDS, value;\n                  return _regenerator.default.wrap(function (_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return previousPromise;\n\n                        case 2:\n                          LDS = _context2.sent;\n\n                          if (!(0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n                            _context2.next = 8;\n                            break;\n                          }\n\n                          _context2.next = 6;\n                          return _Storage.default.getItemAsync(key);\n\n                        case 6:\n                          value = _context2.sent;\n\n                          try {\n                            LDS[key] = JSON.parse(value);\n                          } catch (error) {\n                            console.error('Error getAllContents: ', error);\n                          }\n\n                        case 8:\n                          return _context2.abrupt(\"return\", LDS);\n\n                        case 9:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function () {\n                  return _ref.apply(this, arguments);\n                };\n              }(), _promise.default.resolve({})));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function () {\n      return _getAllContents.apply(this, arguments);\n    };\n  }(),\n  // Used for testing\n  getRawStorage: function () {\n    var _getRawStorage = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee5() {\n      var keys;\n      return _regenerator.default.wrap(function (_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _Storage.default.getAllKeysAsync();\n\n            case 2:\n              keys = _context5.sent;\n              return _context5.abrupt(\"return\", (0, _reduce.default)(keys).call(keys,\n              /*#__PURE__*/\n              function () {\n                var _ref2 = (0, _asyncToGenerator2.default)(\n                /*#__PURE__*/\n                _regenerator.default.mark(function _callee4(previousPromise, key) {\n                  var LDS, value;\n                  return _regenerator.default.wrap(function (_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _context4.next = 2;\n                          return previousPromise;\n\n                        case 2:\n                          LDS = _context4.sent;\n                          _context4.next = 5;\n                          return _Storage.default.getItemAsync(key);\n\n                        case 5:\n                          value = _context4.sent;\n                          LDS[key] = value;\n                          return _context4.abrupt(\"return\", LDS);\n\n                        case 8:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }));\n\n                return function () {\n                  return _ref2.apply(this, arguments);\n                };\n              }(), _promise.default.resolve({})));\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function () {\n      return _getRawStorage.apply(this, arguments);\n    };\n  }(),\n  clear: function () {\n    var _clear = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee6() {\n      var keys, toRemove, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, key, promises;\n\n      return _regenerator.default.wrap(function (_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return _Storage.default.getAllKeysAsync();\n\n            case 2:\n              keys = _context6.sent;\n              toRemove = [];\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _iteratorError = undefined;\n              _context6.prev = 7;\n\n              for (_iterator = (0, _getIterator2.default)(keys); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                key = _step.value;\n\n                if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n                  toRemove.push(key);\n                }\n              }\n\n              _context6.next = 15;\n              break;\n\n            case 11:\n              _context6.prev = 11;\n              _context6.t0 = _context6[\"catch\"](7);\n              _didIteratorError = true;\n              _iteratorError = _context6.t0;\n\n            case 15:\n              _context6.prev = 15;\n              _context6.prev = 16;\n\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n\n            case 18:\n              _context6.prev = 18;\n\n              if (!_didIteratorError) {\n                _context6.next = 21;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 21:\n              return _context6.finish(18);\n\n            case 22:\n              return _context6.finish(15);\n\n            case 23:\n              promises = (0, _map.default)(toRemove).call(toRemove, this.unPinWithName);\n              return _context6.abrupt(\"return\", _promise.default.all(promises));\n\n            case 25:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, this, [[7, 11, 15, 23], [16,, 18, 22]]);\n    }));\n\n    return function () {\n      return _clear.apply(this, arguments);\n    };\n  }()\n};\nmodule.exports = LocalDatastoreController;","\"use strict\";\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * This is a simple wrapper to unify EventEmitter implementations across platforms.\n */\n\nmodule.exports = require('events').EventEmitter;\nvar EventEmitter;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _Storage = _interopRequireDefault(require(\"./Storage\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n\nvar uuidv4 = require('uuid/v4');\n\nvar iidCache = null;\nvar InstallationController = {\n  currentInstallationId: function ()\n  /*: Promise<string>*/\n  {\n    if (typeof iidCache === 'string') {\n      return _promise.default.resolve(iidCache);\n    }\n\n    var path = _Storage.default.generatePath('installationId');\n\n    return _Storage.default.getItemAsync(path).then(function (iid) {\n      if (!iid) {\n        iid = uuidv4();\n        return _Storage.default.setItemAsync(path, iid).then(function () {\n          iidCache = iid;\n          return iid;\n        });\n      }\n\n      iidCache = iid;\n      return iid;\n    });\n  },\n  _clearCache: function () {\n    iidCache = null;\n  },\n  _setInstallationIdCache: function (iid\n  /*: string*/\n  ) {\n    iidCache = iid;\n  }\n};\nmodule.exports = InstallationController;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _ParseUser = _interopRequireDefault(require(\"./ParseUser\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow-weak\n */\n\n\nvar uuidv4 = require('uuid/v4');\n/*:: import type { RequestOptions } from './RESTController';*/\n\n\nvar registered = false;\n/**\n * Provides utility functions for working with Anonymously logged-in users. <br />\n * Anonymous users have some unique characteristics:\n * <ul>\n *  <li>Anonymous users don't need a user name or password.</li>\n *  <ul>\n *    <li>Once logged out, an anonymous user cannot be recovered.</li>\n *  </ul>\n *  <li>signUp converts an anonymous user to a standard user with the given username and password.</li>\n *  <ul>\n *    <li>Data associated with the anonymous user is retained.</li>\n *  </ul>\n *  <li>logIn switches users without converting the anonymous user.</li>\n *  <ul>\n *    <li>Data associated with the anonymous user will be lost.</li>\n *  </ul>\n *  <li>Service logIn (e.g. Facebook, Twitter) will attempt to convert\n *  the anonymous user into a standard user by linking it to the service.</li>\n *  <ul>\n *    <li>If a user already exists that is linked to the service, it will instead switch to the existing user.</li>\n *  </ul>\n *  <li>Service linking (e.g. Facebook, Twitter) will convert the anonymous user\n *  into a standard user by linking it to the service.</li>\n * </ul>\n * @class Parse.AnonymousUtils\n * @static\n */\n\nvar AnonymousUtils = {\n  /**\n   * Gets whether the user has their account linked to anonymous user.\n   *\n   * @method isLinked\n   * @name Parse.AnonymousUtils.isLinked\n   * @param {Parse.User} user User to check for.\n   *     The user must be logged in on this device.\n   * @return {Boolean} <code>true</code> if the user has their account\n   *     linked to an anonymous user.\n   * @static\n   */\n  isLinked: function (user\n  /*: ParseUser*/\n  ) {\n    var provider = this._getAuthProvider();\n\n    return user._isLinked(provider.getAuthType());\n  },\n\n  /**\n   * Logs in a user Anonymously.\n   *\n   * @method logIn\n   * @name Parse.AnonymousUtils.logIn\n   * @param {Object} options MasterKey / SessionToken.\n   * @returns {Promise}\n   * @static\n   */\n  logIn: function (options\n  /*:: ?: RequestOptions*/\n  ) {\n    var provider = this._getAuthProvider();\n\n    return _ParseUser.default.logInWith(provider.getAuthType(), provider.getAuthData(), options);\n  },\n\n  /**\n   * Links Anonymous User to an existing PFUser.\n   *\n   * @method link\n   * @name Parse.AnonymousUtils.link\n   * @param {Parse.User} user User to link. This must be the current user.\n   * @param {Object} options MasterKey / SessionToken.\n   * @returns {Promise}\n   * @static\n   */\n  link: function (user\n  /*: ParseUser*/\n  , options\n  /*:: ?: RequestOptions*/\n  ) {\n    var provider = this._getAuthProvider();\n\n    return user.linkWith(provider.getAuthType(), provider.getAuthData(), options);\n  },\n  _getAuthProvider: function () {\n    var provider = {\n      restoreAuthentication: function () {\n        return true;\n      },\n      getAuthType: function () {\n        return 'anonymous';\n      },\n      getAuthData: function () {\n        return {\n          authData: {\n            id: uuidv4()\n          }\n        };\n      }\n    };\n\n    if (!registered) {\n      _ParseUser.default._registerAuthenticationProvider(provider);\n\n      registered = true;\n    }\n\n    return provider;\n  }\n};\nvar _default = AnonymousUtils;\nexports.default = _default;"],"sourceRoot":""}